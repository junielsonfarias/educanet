CREATE TYPE "incident_severity_level" AS ENUM (
  'Baixa',
  'Media',
  'Alta'
);

CREATE TYPE "incident_resolution_status" AS ENUM (
  'Pendente',
  'Resolvido',
  'Escalado'
);

CREATE TYPE "student_incident_role" AS ENUM (
  'Vitima',
  'Agente',
  'Testemunha'
);

CREATE TYPE "disciplinary_action_type" AS ENUM (
  'Advertencia',
  'Suspensao',
  'Reuniao com Responsaveis',
  'Servico Comunitario'
);

CREATE TYPE "infrastructure_type" AS ENUM (
  'Sala de Aula',
  'Laboratorio',
  'Biblioteca',
  'Quadra',
  'Auditorio',
  'Refeitorio',
  'Secretaria',
  'Outro'
);

CREATE TYPE "person_type" AS ENUM (
  'Aluno',
  'Professor',
  'Funcionario'
);

CREATE TYPE "student_enrollment_status" AS ENUM (
  'Ativo',
  'Inativo',
  'Transferido',
  'Concluido',
  'Evadido'
);

CREATE TYPE "education_level" AS ENUM (
  'Educação Infantil',
  'Ensino Fundamental I',
  'Ensino Fundamental II',
  'Ensino Médio',
  'EJA'
);

CREATE TYPE "class_enrollment_status" AS ENUM (
  'Ativo',
  'Concluido',
  'Evadido'
);

CREATE TYPE "evaluation_type" AS ENUM (
  'Prova',
  'Trabalho',
  'Participacao',
  'Recuperacao',
  'Outro'
);

CREATE TYPE "attendance_status" AS ENUM (
  'Presente',
  'Falta Justificada',
  'Falta Injustificada'
);

CREATE TYPE "school_document_type" AS ENUM (
  'Historico Escolar',
  'Certificado',
  'Declaracao',
  'Atestado'
);

CREATE TYPE "communication_type" AS ENUM (
  'Notificacao',
  'Aviso',
  'Comunicado'
);

CREATE TYPE "protocol_status" AS ENUM (
  'Aberto',
  'Em Andamento',
  'Concluido',
  'Cancelado'
);

CREATE TYPE "secretariat_request_type" AS ENUM (
  'Matricula',
  'Transferencia',
  'Documento',
  'Informacao',
  'Outro'
);

CREATE TYPE "portal_content_type" AS ENUM (
  'Noticia',
  'Evento',
  'Pagina Institucional',
  'Comunicado'
);

CREATE TYPE "portal_publication_status" AS ENUM (
  'Rascunho',
  'Publicado',
  'Arquivado'
);

CREATE TYPE "academic_period_type" AS ENUM (
  'Semestre',
  'Trimestre',
  'Bimestre'
);

CREATE TYPE "relationship_type" AS ENUM (
  'Pai',
  'Mae',
  'Tutor Legal',
  'Outro'
);

CREATE TYPE "preferred_contact_method" AS ENUM (
  'Telefone',
  'Email',
  'Ambos'
);

CREATE TYPE "event_type" AS ENUM (
  'Academico',
  'Esportivo',
  'Cultural',
  'Feriado',
  'Reuniao',
  'Outro'
);

CREATE TYPE "event_audience" AS ENUM (
  'Alunos',
  'Professores',
  'Funcionarios',
  'Pais',
  'Comunidade',
  'Todos'
);

CREATE TYPE "event_status" AS ENUM (
  'Confirmado',
  'Cancelado',
  'Adiado'
);

CREATE TYPE "professional_development_type" AS ENUM (
  'Curso',
  'Workshop',
  'Conferencia',
  'Certificacao',
  'Outro'
);

CREATE TYPE "professional_development_status" AS ENUM (
  'Planejado',
  'Inscrito',
  'Concluido',
  'Cancelado'
);

CREATE TYPE "entity_type" AS ENUM (
  'school',
  'infrastructure',
  'person',
  'student_profile',
  'guardian',
  'student_enrollment',
  'teacher',
  'position',
  'department',
  'staff',
  'academic_year',
  'academic_period',
  'course',
  'subject',
  'class',
  'lesson',
  'evaluation_instance',
  'grade',
  'attendance',
  'school_document',
  'communication',
  'secretariat_protocol',
  'public_portal_content',
  'system_setting',
  'role',
  'permission',
  'incident_type',
  'incident',
  'disciplinary_action',
  'school_event',
  'professional_development_program',
  'teacher_certification'
);

CREATE TABLE "schools" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(255) UNIQUE NOT NULL,
  "address" varchar(500) NOT NULL,
  "phone" varchar(20),
  "email" varchar(255) UNIQUE,
  "cnpj" varchar(18) UNIQUE,
  "inep_code" varchar(10) UNIQUE,
  "student_capacity" integer,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "infrastructures" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "school_id" integer NOT NULL,
  "type" infrastructure_type NOT NULL,
  "description" varchar(500),
  "quantity" integer NOT NULL DEFAULT 1,
  "capacity" integer,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "people" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "first_name" varchar(100) NOT NULL,
  "last_name" varchar(150) NOT NULL,
  "date_of_birth" date NOT NULL,
  "cpf" varchar(14) UNIQUE NOT NULL,
  "rg" varchar(20) UNIQUE,
  "email" varchar(255) UNIQUE,
  "phone" varchar(20),
  "address" varchar(500),
  "type" person_type NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "student_profiles" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "person_id" integer UNIQUE NOT NULL,
  "student_registration_number" varchar(50) UNIQUE NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "guardians" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "person_id" integer UNIQUE NOT NULL,
  "relationship_type" relationship_type NOT NULL,
  "is_emergency_contact" boolean NOT NULL DEFAULT false,
  "preferred_contact_method" preferred_contact_method NOT NULL DEFAULT 'ambos',
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "student_guardians" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_profile_id" integer NOT NULL,
  "guardian_id" integer NOT NULL,
  "is_primary_contact" boolean NOT NULL DEFAULT false,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "student_enrollments" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_profile_id" integer NOT NULL,
  "academic_year_id" integer NOT NULL,
  "school_id" integer NOT NULL,
  "enrollment_number" varchar(50) UNIQUE NOT NULL,
  "enrollment_date" date NOT NULL DEFAULT (now()),
  "enrollment_status" student_enrollment_status NOT NULL DEFAULT 'ativo',
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "student_status_history" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_enrollment_id" integer NOT NULL,
  "old_status" student_enrollment_status,
  "new_status" student_enrollment_status NOT NULL,
  "change_date" timestamp NOT NULL DEFAULT (now()),
  "changed_by_id" integer NOT NULL,
  "note" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "teachers" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "person_id" integer UNIQUE NOT NULL,
  "functional_registration" varchar(50) UNIQUE NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "positions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) UNIQUE NOT NULL,
  "description" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "departments" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) UNIQUE NOT NULL,
  "description" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "staff" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "person_id" integer UNIQUE NOT NULL,
  "functional_registration" varchar(50) UNIQUE NOT NULL,
  "position_id" integer NOT NULL,
  "department_id" integer NOT NULL,
  "school_id" integer,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "academic_years" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "year" integer UNIQUE NOT NULL,
  "start_date" date NOT NULL,
  "end_date" date NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "academic_periods" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "academic_year_id" integer NOT NULL,
  "name" varchar(100) NOT NULL,
  "start_date" date NOT NULL,
  "end_date" date NOT NULL,
  "type" academic_period_type NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "courses" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(255) UNIQUE NOT NULL,
  "description" text,
  "duration_months" integer,
  "education_level" education_level NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "subjects" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) UNIQUE NOT NULL,
  "code" varchar(20) UNIQUE NOT NULL,
  "description" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "course_subjects" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "course_id" integer NOT NULL,
  "subject_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "classes" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) NOT NULL,
  "academic_period_id" integer NOT NULL,
  "school_id" integer NOT NULL,
  "course_id" integer NOT NULL,
  "homeroom_teacher_id" integer,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "class_enrollments" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_enrollment_id" integer NOT NULL,
  "class_id" integer NOT NULL,
  "enrollment_date" date NOT NULL DEFAULT (now()),
  "status" class_enrollment_status NOT NULL DEFAULT 'ativo',
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "class_teacher_subjects" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "class_id" integer NOT NULL,
  "teacher_id" integer NOT NULL,
  "subject_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "lessons" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "class_teacher_subject_id" integer NOT NULL,
  "lesson_date" date NOT NULL,
  "start_time" time NOT NULL,
  "end_time" time NOT NULL,
  "content" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "evaluation_instances" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "class_teacher_subject_id" integer NOT NULL,
  "title" varchar(255) NOT NULL,
  "description" text,
  "evaluation_type" evaluation_type NOT NULL,
  "evaluation_date" date NOT NULL,
  "max_grade" decimal(5,2) NOT NULL DEFAULT 10,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "grades" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_enrollment_id" integer NOT NULL,
  "evaluation_instance_id" integer NOT NULL,
  "component_name" varchar(255) NOT NULL DEFAULT 'geral',
  "grade_value" decimal(5,2) NOT NULL,
  "release_date" date NOT NULL DEFAULT (now()),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "attendances" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_enrollment_id" integer NOT NULL,
  "lesson_id" integer NOT NULL,
  "status" attendance_status NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "school_documents" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_enrollment_id" integer NOT NULL,
  "type" school_document_type NOT NULL,
  "issue_date" date NOT NULL DEFAULT (now()),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "school_documents_versions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "school_document_id" integer NOT NULL,
  "version_number" integer NOT NULL,
  "file_path" varchar(500) NOT NULL,
  "version_date" timestamp NOT NULL DEFAULT (now()),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "communications" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(255) NOT NULL,
  "message" text NOT NULL,
  "send_date" timestamp NOT NULL DEFAULT (now()),
  "type" communication_type NOT NULL,
  "sender_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "communication_recipients" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "communication_id" integer NOT NULL,
  "person_id" integer NOT NULL,
  "read_date" timestamp,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "secretariat_protocols" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "protocol_number" varchar(50) UNIQUE NOT NULL,
  "requester_id" integer NOT NULL,
  "request_type" secretariat_request_type NOT NULL,
  "opening_date" date NOT NULL DEFAULT (now()),
  "status" protocol_status NOT NULL DEFAULT 'aberto',
  "observations" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "protocol_status_history" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "protocol_id" integer NOT NULL,
  "old_status" protocol_status,
  "new_status" protocol_status NOT NULL,
  "change_date" timestamp NOT NULL DEFAULT (now()),
  "changed_by_id" integer NOT NULL,
  "note" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "secretariat_services" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "protocol_id" integer,
  "attendant_id" integer NOT NULL,
  "requester_id" integer NOT NULL,
  "service_date" timestamp NOT NULL DEFAULT (now()),
  "service_description" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "public_portal_content" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" varchar(255) NOT NULL,
  "type" portal_content_type NOT NULL,
  "publication_date" timestamp NOT NULL DEFAULT (now()),
  "author_id" integer NOT NULL,
  "publication_status" portal_publication_status NOT NULL DEFAULT 'rascunho',
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "public_portal_content_versions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "public_portal_content_id" integer NOT NULL,
  "version_number" integer NOT NULL,
  "content" text NOT NULL,
  "version_date" timestamp NOT NULL DEFAULT (now()),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "system_settings" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "setting_key" varchar(255) UNIQUE NOT NULL,
  "setting_value" text,
  "description" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "roles" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) UNIQUE NOT NULL,
  "description" text,
  "default_for_person_type" person_type UNIQUE,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "permissions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(100) UNIQUE NOT NULL,
  "description" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "role_permissions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "role_id" integer NOT NULL,
  "permission_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "user_roles" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "person_id" integer NOT NULL,
  "role_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "incident_types" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(255) UNIQUE NOT NULL,
  "description" text,
  "severity_level" incident_severity_level NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "incidents" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "incident_type_id" integer NOT NULL,
  "school_id" integer NOT NULL,
  "reported_by_id" integer NOT NULL,
  "incident_date" timestamp NOT NULL DEFAULT (now()),
  "description" text,
  "resolution_status" incident_resolution_status NOT NULL DEFAULT 'pendente',
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "student_incidents" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_profile_id" integer NOT NULL,
  "incident_id" integer NOT NULL,
  "role_in_incident" student_incident_role NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "disciplinary_actions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "student_incident_id" integer NOT NULL,
  "action_type" disciplinary_action_type NOT NULL,
  "action_date" date NOT NULL DEFAULT (now()),
  "description" text,
  "taken_by_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "school_events" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "school_id" integer,
  "title" varchar(255) NOT NULL,
  "description" text,
  "event_type" event_type NOT NULL,
  "start_date_time" timestamp NOT NULL,
  "end_date_time" timestamp NOT NULL,
  "location" varchar(500),
  "audience" event_audience NOT NULL,
  "status" event_status NOT NULL DEFAULT 'confirmado',
  "organizer_id" integer NOT NULL,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "event_attendees" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "event_id" integer NOT NULL,
  "person_id" integer NOT NULL,
  "registration_date" timestamp NOT NULL DEFAULT (now()),
  "attendance_status" varchar(50),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "professional_development_programs" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" varchar(255) NOT NULL,
  "description" text,
  "type" professional_development_type NOT NULL,
  "start_date" date NOT NULL,
  "end_date" date,
  "organizer" varchar(255),
  "cost" decimal(10,2),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "teacher_certifications" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "teacher_id" integer NOT NULL,
  "certification_name" varchar(255) NOT NULL,
  "issue_date" date NOT NULL,
  "expiry_date" date,
  "issuing_body" varchar(255),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "teacher_pd_enrollments" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "teacher_id" integer NOT NULL,
  "program_id" integer NOT NULL,
  "enrollment_date" date NOT NULL DEFAULT (now()),
  "completion_date" date,
  "status" professional_development_status NOT NULL DEFAULT 'planejado',
  "grade_or_feedback" text,
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE TABLE "attachments" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "entity_type" entity_type NOT NULL,
  "entity_id" integer NOT NULL,
  "file_name" varchar(255) NOT NULL,
  "file_path_url" varchar(500) NOT NULL,
  "file_type" varchar(50) NOT NULL,
  "file_size_bytes" integer,
  "description" text,
  "uploaded_by_id" integer NOT NULL,
  "uploaded_at" timestamp NOT NULL DEFAULT (now()),
  "created_at" timestamp NOT NULL DEFAULT (now()),
  "updated_at" timestamp NOT NULL DEFAULT (now()),
  "created_by" integer NOT NULL,
  "updated_by" integer,
  "deleted_at" timestamp
);

CREATE INDEX ON "schools" ("name");

CREATE UNIQUE INDEX ON "schools" ("cnpj");

CREATE UNIQUE INDEX ON "schools" ("inep_code");

CREATE UNIQUE INDEX ON "people" ("cpf");

CREATE UNIQUE INDEX ON "people" ("email");

CREATE INDEX ON "people" ("first_name", "last_name");

CREATE UNIQUE INDEX ON "student_profiles" ("student_registration_number");

CREATE UNIQUE INDEX ON "student_guardians" ("student_profile_id", "guardian_id");

CREATE UNIQUE INDEX ON "student_enrollments" ("enrollment_number");

CREATE UNIQUE INDEX ON "student_enrollments" ("student_profile_id", "academic_year_id", "school_id");

CREATE UNIQUE INDEX ON "teachers" ("functional_registration");

CREATE UNIQUE INDEX ON "positions" ("name");

CREATE UNIQUE INDEX ON "departments" ("name");

CREATE UNIQUE INDEX ON "staff" ("functional_registration");

CREATE UNIQUE INDEX ON "academic_years" ("year");

CREATE UNIQUE INDEX ON "academic_periods" ("academic_year_id", "name");

CREATE INDEX ON "courses" ("name");

CREATE INDEX ON "subjects" ("name");

CREATE UNIQUE INDEX ON "subjects" ("code");

CREATE UNIQUE INDEX ON "course_subjects" ("course_id", "subject_id");

CREATE UNIQUE INDEX ON "classes" ("name", "academic_period_id", "school_id");

CREATE INDEX ON "classes" ("name");

CREATE UNIQUE INDEX ON "class_enrollments" ("student_enrollment_id", "class_id");

CREATE UNIQUE INDEX ON "class_teacher_subjects" ("class_id", "teacher_id", "subject_id");

CREATE UNIQUE INDEX ON "evaluation_instances" ("class_teacher_subject_id", "title", "evaluation_date");

CREATE UNIQUE INDEX ON "grades" ("student_enrollment_id", "evaluation_instance_id", "component_name");

CREATE UNIQUE INDEX ON "attendances" ("student_enrollment_id", "lesson_id");

CREATE UNIQUE INDEX ON "school_documents_versions" ("school_document_id", "version_number");

CREATE UNIQUE INDEX ON "communication_recipients" ("communication_id", "person_id");

CREATE UNIQUE INDEX ON "secretariat_protocols" ("protocol_number");

CREATE INDEX ON "public_portal_content" ("title");

CREATE UNIQUE INDEX ON "public_portal_content_versions" ("public_portal_content_id", "version_number");

CREATE UNIQUE INDEX ON "system_settings" ("setting_key");

CREATE UNIQUE INDEX ON "roles" ("name");

CREATE UNIQUE INDEX ON "roles" ("default_for_person_type");

CREATE UNIQUE INDEX ON "permissions" ("name");

CREATE UNIQUE INDEX ON "role_permissions" ("role_id", "permission_id");

CREATE UNIQUE INDEX ON "user_roles" ("person_id", "role_id");

CREATE UNIQUE INDEX ON "incident_types" ("name");

CREATE UNIQUE INDEX ON "student_incidents" ("student_profile_id", "incident_id", "role_in_incident");

CREATE INDEX ON "school_events" ("title");

CREATE INDEX ON "school_events" ("start_date_time");

CREATE UNIQUE INDEX ON "event_attendees" ("event_id", "person_id");

CREATE INDEX ON "professional_development_programs" ("name");

CREATE UNIQUE INDEX ON "teacher_certifications" ("teacher_id", "certification_name", "issue_date");

CREATE UNIQUE INDEX ON "teacher_pd_enrollments" ("teacher_id", "program_id");

CREATE INDEX ON "attachments" ("entity_type", "entity_id");

COMMENT ON TABLE "schools" IS 'Gerencia as escolas municipais e suas informações básicas.';

COMMENT ON COLUMN "schools"."name" IS 'Nome completo da escola.';

COMMENT ON COLUMN "schools"."address" IS 'Endereço físico da escola.';

COMMENT ON COLUMN "schools"."phone" IS 'Telefone de contato da escola.';

COMMENT ON COLUMN "schools"."email" IS 'E-mail oficial da escola.';

COMMENT ON COLUMN "schools"."cnpj" IS 'CNPJ da escola.';

COMMENT ON COLUMN "schools"."inep_code" IS 'Código INEP da escola para integração com Educacenso.';

COMMENT ON COLUMN "schools"."student_capacity" IS 'Capacidade máxima de alunos da escola.';

COMMENT ON COLUMN "schools"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "schools"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "schools"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "schools"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "schools"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "infrastructures" IS 'Detalhes da infraestrutura de cada escola, como salas, laboratórios, etc.';

COMMENT ON COLUMN "infrastructures"."school_id" IS 'ID da escola à qual a infraestrutura pertence.';

COMMENT ON COLUMN "infrastructures"."type" IS 'Tipo de infraestrutura (ex: Sala de Aula, Laboratório).';

COMMENT ON COLUMN "infrastructures"."description" IS 'Descrição detalhada da infraestrutura.';

COMMENT ON COLUMN "infrastructures"."quantity" IS 'Quantidade de itens deste tipo de infraestrutura.';

COMMENT ON COLUMN "infrastructures"."capacity" IS 'Capacidade de pessoas ou itens da infraestrutura.';

COMMENT ON COLUMN "infrastructures"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "infrastructures"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "infrastructures"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "infrastructures"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "infrastructures"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "people" IS 'Armazena informações gerais sobre todas as pessoas (alunos, professores, funcionários) do sistema. O campo "type" define a classificação fundamental da pessoa.';

COMMENT ON COLUMN "people"."first_name" IS 'Primeiro nome da pessoa.';

COMMENT ON COLUMN "people"."last_name" IS 'Sobrenome da pessoa.';

COMMENT ON COLUMN "people"."date_of_birth" IS 'Data de nascimento da pessoa.';

COMMENT ON COLUMN "people"."cpf" IS 'Cadastro de Pessoa Física, único para cada pessoa.';

COMMENT ON COLUMN "people"."rg" IS 'Registro Geral da pessoa.';

COMMENT ON COLUMN "people"."email" IS 'Endereço de e-mail da pessoa, pode ser nulo.';

COMMENT ON COLUMN "people"."phone" IS 'Telefone de contato da pessoa.';

COMMENT ON COLUMN "people"."address" IS 'Endereço residencial da pessoa.';

COMMENT ON COLUMN "people"."type" IS 'Classificação fundamental da pessoa (Aluno, Professor, Funcionário).';

COMMENT ON COLUMN "people"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "people"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "people"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "people"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "people"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "student_profiles" IS 'Armazena informações permanentes do perfil do aluno, como o número de registro único, vinculado a uma pessoa.';

COMMENT ON COLUMN "student_profiles"."person_id" IS 'ID da pessoa associada a este perfil de aluno.';

COMMENT ON COLUMN "student_profiles"."student_registration_number" IS 'Número de registro único e permanente do aluno como pessoa.';

COMMENT ON COLUMN "student_profiles"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "student_profiles"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "student_profiles"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "student_profiles"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "student_profiles"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "guardians" IS 'Armazena informações específicas sobre os responsáveis pelos alunos, vinculando-os a uma pessoa existente.';

COMMENT ON COLUMN "guardians"."person_id" IS 'ID da pessoa que atua como responsável.';

COMMENT ON COLUMN "guardians"."relationship_type" IS 'Tipo de relacionamento com o aluno (Pai, Mãe, Tutor Legal, Outro).';

COMMENT ON COLUMN "guardians"."is_emergency_contact" IS 'Indica se este responsável é um contato de emergência.';

COMMENT ON COLUMN "guardians"."preferred_contact_method" IS 'Método de contato preferencial com o responsável.';

COMMENT ON COLUMN "guardians"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "guardians"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "guardians"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "guardians"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "guardians"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "student_guardians" IS 'Associa alunos a seus responsáveis, indicando qual é o contato principal.';

COMMENT ON COLUMN "student_guardians"."student_profile_id" IS 'ID do perfil do aluno.';

COMMENT ON COLUMN "student_guardians"."guardian_id" IS 'ID do responsável.';

COMMENT ON COLUMN "student_guardians"."is_primary_contact" IS 'Indica se este é o contato principal para o aluno.';

COMMENT ON COLUMN "student_guardians"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "student_guardians"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "student_guardians"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "student_guardians"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "student_guardians"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "student_enrollments" IS 'Registra as matrículas dos alunos em escolas e anos letivos específicos, vinculadas ao perfil do aluno.';

COMMENT ON COLUMN "student_enrollments"."student_profile_id" IS 'ID do perfil do aluno.';

COMMENT ON COLUMN "student_enrollments"."academic_year_id" IS 'ID do ano letivo da matrícula.';

COMMENT ON COLUMN "student_enrollments"."school_id" IS 'ID da escola onde o aluno está matriculado.';

COMMENT ON COLUMN "student_enrollments"."enrollment_number" IS 'Número de matrícula do aluno, específico para cada matrícula.';

COMMENT ON COLUMN "student_enrollments"."enrollment_date" IS 'Data em que o aluno foi matriculado.';

COMMENT ON COLUMN "student_enrollments"."enrollment_status" IS 'Status atual da matrícula do aluno.';

COMMENT ON COLUMN "student_enrollments"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "student_enrollments"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "student_enrollments"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "student_enrollments"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "student_enrollments"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "student_status_history" IS 'Registra o histórico de mudanças de status de matrícula dos alunos.';

COMMENT ON COLUMN "student_status_history"."student_enrollment_id" IS 'ID da matrícula do aluno cujo status foi alterado.';

COMMENT ON COLUMN "student_status_history"."old_status" IS 'Status anterior do aluno.';

COMMENT ON COLUMN "student_status_history"."new_status" IS 'Novo status do aluno.';

COMMENT ON COLUMN "student_status_history"."change_date" IS 'Data e hora da mudança de status.';

COMMENT ON COLUMN "student_status_history"."changed_by_id" IS 'ID da pessoa que realizou a mudança de status.';

COMMENT ON COLUMN "student_status_history"."note" IS 'Observações sobre a mudança de status.';

COMMENT ON COLUMN "student_status_history"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "student_status_history"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "student_status_history"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "student_status_history"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "student_status_history"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "teachers" IS 'Informações específicas dos professores, complementando a tabela de pessoas.';

COMMENT ON COLUMN "teachers"."person_id" IS 'ID da pessoa associada a este professor.';

COMMENT ON COLUMN "teachers"."functional_registration" IS 'Número de registro funcional do professor.';

COMMENT ON COLUMN "teachers"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "teachers"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "teachers"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "teachers"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "teachers"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "positions" IS 'Define os cargos disponíveis para funcionários.';

COMMENT ON COLUMN "positions"."name" IS 'Nome do cargo.';

COMMENT ON COLUMN "positions"."description" IS 'Descrição detalhada do cargo.';

COMMENT ON COLUMN "positions"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "positions"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "positions"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "positions"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "positions"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "departments" IS 'Define os departamentos da instituição.';

COMMENT ON COLUMN "departments"."name" IS 'Nome do departamento.';

COMMENT ON COLUMN "departments"."description" IS 'Descrição detalhada do departamento.';

COMMENT ON COLUMN "departments"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "departments"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "departments"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "departments"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "departments"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "staff" IS 'Informações específicas dos funcionários administrativos e de apoio, complementando a tabela de pessoas, com referências a cargos e departamentos.';

COMMENT ON COLUMN "staff"."person_id" IS 'ID da pessoa associada a este funcionário.';

COMMENT ON COLUMN "staff"."functional_registration" IS 'Número de registro funcional do funcionário.';

COMMENT ON COLUMN "staff"."position_id" IS 'ID do cargo ou função do funcionário.';

COMMENT ON COLUMN "staff"."department_id" IS 'ID do departamento ao qual o funcionário pertence.';

COMMENT ON COLUMN "staff"."school_id" IS 'ID da escola onde o funcionário atua, se aplicável.';

COMMENT ON COLUMN "staff"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "staff"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "staff"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "staff"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "staff"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "academic_years" IS 'Define os anos letivos com suas datas de início e fim.';

COMMENT ON COLUMN "academic_years"."year" IS 'Ano letivo (ex: 2023).';

COMMENT ON COLUMN "academic_years"."start_date" IS 'Data de início do ano letivo.';

COMMENT ON COLUMN "academic_years"."end_date" IS 'Data de término do ano letivo.';

COMMENT ON COLUMN "academic_years"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "academic_years"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "academic_years"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "academic_years"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "academic_years"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "academic_periods" IS 'Define os períodos acadêmicos (semestres, trimestres, bimestres) dentro de cada ano letivo.';

COMMENT ON COLUMN "academic_periods"."academic_year_id" IS 'ID do ano letivo ao qual este período pertence.';

COMMENT ON COLUMN "academic_periods"."name" IS 'Nome do período acadêmico (ex: 1º Semestre, 2º Trimestre).';

COMMENT ON COLUMN "academic_periods"."start_date" IS 'Data de início do período acadêmico.';

COMMENT ON COLUMN "academic_periods"."end_date" IS 'Data de término do período acadêmico.';

COMMENT ON COLUMN "academic_periods"."type" IS 'Tipo de período acadêmico (Semestre, Trimestre, Bimestre).';

COMMENT ON COLUMN "academic_periods"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "academic_periods"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "academic_periods"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "academic_periods"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "academic_periods"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "courses" IS 'Define os cursos educacionais oferecidos pelas escolas.';

COMMENT ON COLUMN "courses"."name" IS 'Nome do curso.';

COMMENT ON COLUMN "courses"."description" IS 'Descrição detalhada do curso.';

COMMENT ON COLUMN "courses"."duration_months" IS 'Duração do curso em meses.';

COMMENT ON COLUMN "courses"."education_level" IS 'Nível de ensino do curso.';

COMMENT ON COLUMN "courses"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "courses"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "courses"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "courses"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "courses"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "subjects" IS 'Define as disciplinas que compõem os currículos dos cursos.';

COMMENT ON COLUMN "subjects"."name" IS 'Nome da disciplina.';

COMMENT ON COLUMN "subjects"."code" IS 'Código único da disciplina.';

COMMENT ON COLUMN "subjects"."description" IS 'Descrição da disciplina.';

COMMENT ON COLUMN "subjects"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "subjects"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "subjects"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "subjects"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "subjects"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "course_subjects" IS 'Associa disciplinas a cursos, definindo o currículo de cada curso.';

COMMENT ON COLUMN "course_subjects"."course_id" IS 'ID do curso.';

COMMENT ON COLUMN "course_subjects"."subject_id" IS 'ID da disciplina.';

COMMENT ON COLUMN "course_subjects"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "course_subjects"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "course_subjects"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "course_subjects"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "course_subjects"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "classes" IS 'Organiza os alunos em grupos para um determinado período acadêmico e curso dentro de uma escola.';

COMMENT ON COLUMN "classes"."name" IS 'Nome da turma (ex: "5º Ano A").';

COMMENT ON COLUMN "classes"."academic_period_id" IS 'ID do período acadêmico ao qual a turma pertence.';

COMMENT ON COLUMN "classes"."school_id" IS 'ID da escola à qual a turma pertence.';

COMMENT ON COLUMN "classes"."course_id" IS 'ID do curso ao qual a turma está associada.';

COMMENT ON COLUMN "classes"."homeroom_teacher_id" IS 'ID do professor responsável pela turma (opcional).';

COMMENT ON COLUMN "classes"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "classes"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "classes"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "classes"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "classes"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "class_enrollments" IS 'Tabela de junção para registrar a matrícula de alunos em turmas específicas, vinculada a uma matrícula geral do aluno.';

COMMENT ON COLUMN "class_enrollments"."student_enrollment_id" IS 'ID da matrícula do aluno.';

COMMENT ON COLUMN "class_enrollments"."class_id" IS 'ID da turma na qual o aluno está matriculado.';

COMMENT ON COLUMN "class_enrollments"."enrollment_date" IS 'Data em que o aluno foi matriculado na turma.';

COMMENT ON COLUMN "class_enrollments"."status" IS 'Status da matrícula do aluno nesta turma.';

COMMENT ON COLUMN "class_enrollments"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "class_enrollments"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "class_enrollments"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "class_enrollments"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "class_enrollments"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "class_teacher_subjects" IS 'Associa professores a disciplinas e turmas para um ano letivo específico.';

COMMENT ON COLUMN "class_teacher_subjects"."class_id" IS 'ID da turma.';

COMMENT ON COLUMN "class_teacher_subjects"."teacher_id" IS 'ID do professor.';

COMMENT ON COLUMN "class_teacher_subjects"."subject_id" IS 'ID da disciplina.';

COMMENT ON COLUMN "class_teacher_subjects"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "class_teacher_subjects"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "class_teacher_subjects"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "class_teacher_subjects"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "class_teacher_subjects"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "lessons" IS 'Registra as aulas ministradas, vinculando-as à turma, professor e disciplina através de class_teacher_subject_id.';

COMMENT ON COLUMN "lessons"."class_teacher_subject_id" IS 'ID da associação entre turma, professor e disciplina.';

COMMENT ON COLUMN "lessons"."lesson_date" IS 'Data em que a aula ocorreu.';

COMMENT ON COLUMN "lessons"."start_time" IS 'Horário de início da aula.';

COMMENT ON COLUMN "lessons"."end_time" IS 'Horário de término da aula.';

COMMENT ON COLUMN "lessons"."content" IS 'Conteúdo abordado na aula.';

COMMENT ON COLUMN "lessons"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "lessons"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "lessons"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "lessons"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "lessons"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "evaluation_instances" IS 'Define instâncias específicas de avaliações para turmas e disciplinas.';

COMMENT ON COLUMN "evaluation_instances"."class_teacher_subject_id" IS 'ID da associação entre turma, professor e disciplina para a qual a avaliação foi criada.';

COMMENT ON COLUMN "evaluation_instances"."title" IS 'Título da avaliação (ex: Prova 1, Trabalho Final).';

COMMENT ON COLUMN "evaluation_instances"."description" IS 'Descrição detalhada da avaliação.';

COMMENT ON COLUMN "evaluation_instances"."evaluation_type" IS 'Tipo de avaliação (ex: Prova, Trabalho).';

COMMENT ON COLUMN "evaluation_instances"."evaluation_date" IS 'Data em que a avaliação foi aplicada ou entregue.';

COMMENT ON COLUMN "evaluation_instances"."max_grade" IS 'Nota máxima possível para esta avaliação.';

COMMENT ON COLUMN "evaluation_instances"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "evaluation_instances"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "evaluation_instances"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "evaluation_instances"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "evaluation_instances"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "grades" IS 'Armazena as notas dos alunos para componentes individuais de avaliações, vinculadas a uma matrícula específica e a uma instância de avaliação.';

COMMENT ON COLUMN "grades"."student_enrollment_id" IS 'ID da matrícula do aluno que recebeu a nota.';

COMMENT ON COLUMN "grades"."evaluation_instance_id" IS 'ID da instância de avaliação à qual esta nota pertence.';

COMMENT ON COLUMN "grades"."component_name" IS 'Nome do componente individual da avaliação (ex: Questão 1, Redação, Participação). Use "Geral" para a nota total da avaliação.';

COMMENT ON COLUMN "grades"."grade_value" IS 'Valor da nota atribuída.';

COMMENT ON COLUMN "grades"."release_date" IS 'Data em que a nota foi lançada.';

COMMENT ON COLUMN "grades"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "grades"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "grades"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "grades"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "grades"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "attendances" IS 'Registra a frequência dos alunos em cada aula ministrada, vinculada a uma matrícula específica.';

COMMENT ON COLUMN "attendances"."student_enrollment_id" IS 'ID da matrícula do aluno.';

COMMENT ON COLUMN "attendances"."lesson_id" IS 'ID da aula à qual a frequência se refere.';

COMMENT ON COLUMN "attendances"."status" IS 'Status de frequência do aluno na aula (Presente, Falta Justificada, Falta Injustificada).';

COMMENT ON COLUMN "attendances"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "attendances"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "attendances"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "attendances"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "attendances"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "school_documents" IS 'Gerencia documentos escolares como históricos, certificados e declarações, vinculados a uma matrícula específica.';

COMMENT ON COLUMN "school_documents"."student_enrollment_id" IS 'ID da matrícula do aluno ao qual o documento pertence.';

COMMENT ON COLUMN "school_documents"."type" IS 'Tipo de documento escolar (ex: Histórico, Certificado).';

COMMENT ON COLUMN "school_documents"."issue_date" IS 'Data de emissão do documento.';

COMMENT ON COLUMN "school_documents"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "school_documents"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "school_documents"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "school_documents"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "school_documents"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "school_documents_versions" IS 'Armazena as diferentes versões dos documentos escolares.';

COMMENT ON COLUMN "school_documents_versions"."school_document_id" IS 'ID do documento escolar ao qual esta versão pertence.';

COMMENT ON COLUMN "school_documents_versions"."version_number" IS 'Número da versão do documento.';

COMMENT ON COLUMN "school_documents_versions"."file_path" IS 'Caminho ou URL para o arquivo desta versão do documento.';

COMMENT ON COLUMN "school_documents_versions"."version_date" IS 'Data e hora em que esta versão foi criada.';

COMMENT ON COLUMN "school_documents_versions"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "school_documents_versions"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "school_documents_versions"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "school_documents_versions"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "school_documents_versions"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "communications" IS 'Gerencia notificações e avisos enviados para a comunidade escolar.';

COMMENT ON COLUMN "communications"."title" IS 'Título da comunicação.';

COMMENT ON COLUMN "communications"."message" IS 'Conteúdo da mensagem.';

COMMENT ON COLUMN "communications"."send_date" IS 'Data e hora do envio da comunicação.';

COMMENT ON COLUMN "communications"."type" IS 'Tipo de comunicação (Notificação, Aviso, Comunicado).';

COMMENT ON COLUMN "communications"."sender_id" IS 'ID da pessoa que enviou a comunicação.';

COMMENT ON COLUMN "communications"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "communications"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "communications"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "communications"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "communications"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "communication_recipients" IS 'Tabela de junção para associar comunicações a seus destinatários.';

COMMENT ON COLUMN "communication_recipients"."communication_id" IS 'ID da comunicação.';

COMMENT ON COLUMN "communication_recipients"."person_id" IS 'ID da pessoa destinatária.';

COMMENT ON COLUMN "communication_recipients"."read_date" IS 'Data e hora em que o destinatário leu a comunicação, pode ser nulo.';

COMMENT ON COLUMN "communication_recipients"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "communication_recipients"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "communication_recipients"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "communication_recipients"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "communication_recipients"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "secretariat_protocols" IS 'Gerencia os protocolos de atendimento e solicitações na secretaria.';

COMMENT ON COLUMN "secretariat_protocols"."protocol_number" IS 'Número único do protocolo.';

COMMENT ON COLUMN "secretariat_protocols"."requester_id" IS 'ID da pessoa que abriu o protocolo.';

COMMENT ON COLUMN "secretariat_protocols"."request_type" IS 'Tipo de solicitação do protocolo.';

COMMENT ON COLUMN "secretariat_protocols"."opening_date" IS 'Data de abertura do protocolo.';

COMMENT ON COLUMN "secretariat_protocols"."status" IS 'Status atual do protocolo.';

COMMENT ON COLUMN "secretariat_protocols"."observations" IS 'Observações adicionais sobre o protocolo.';

COMMENT ON COLUMN "secretariat_protocols"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "secretariat_protocols"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "secretariat_protocols"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "secretariat_protocols"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "secretariat_protocols"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "protocol_status_history" IS 'Registra o histórico de mudanças de status dos protocolos da secretaria.';

COMMENT ON COLUMN "protocol_status_history"."protocol_id" IS 'ID do protocolo cujo status foi alterado.';

COMMENT ON COLUMN "protocol_status_history"."old_status" IS 'Status anterior do protocolo.';

COMMENT ON COLUMN "protocol_status_history"."new_status" IS 'Novo status do protocolo.';

COMMENT ON COLUMN "protocol_status_history"."change_date" IS 'Data e hora da mudança de status.';

COMMENT ON COLUMN "protocol_status_history"."changed_by_id" IS 'ID da pessoa que realizou a mudança de status.';

COMMENT ON COLUMN "protocol_status_history"."note" IS 'Observações sobre a mudança de status.';

COMMENT ON COLUMN "protocol_status_history"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "protocol_status_history"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "protocol_status_history"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "protocol_status_history"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "protocol_status_history"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "secretariat_services" IS 'Registra os atendimentos realizados pela secretaria, podendo estar vinculados a um protocolo.';

COMMENT ON COLUMN "secretariat_services"."protocol_id" IS 'ID do protocolo associado ao atendimento (opcional).';

COMMENT ON COLUMN "secretariat_services"."attendant_id" IS 'ID do funcionário que realizou o atendimento.';

COMMENT ON COLUMN "secretariat_services"."requester_id" IS 'ID da pessoa que foi atendida.';

COMMENT ON COLUMN "secretariat_services"."service_date" IS 'Data e hora do atendimento.';

COMMENT ON COLUMN "secretariat_services"."service_description" IS 'Descrição do atendimento realizado.';

COMMENT ON COLUMN "secretariat_services"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "secretariat_services"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "secretariat_services"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "secretariat_services"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "secretariat_services"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "public_portal_content" IS 'Gerencia o conteúdo exibido no portal público institucional da prefeitura.';

COMMENT ON COLUMN "public_portal_content"."title" IS 'Título do conteúdo.';

COMMENT ON COLUMN "public_portal_content"."type" IS 'Tipo de conteúdo (Notícia, Evento, Página Institucional).';

COMMENT ON COLUMN "public_portal_content"."publication_date" IS 'Data e hora da publicação do conteúdo.';

COMMENT ON COLUMN "public_portal_content"."author_id" IS 'ID do funcionário que publicou o conteúdo.';

COMMENT ON COLUMN "public_portal_content"."publication_status" IS 'Status da publicação (Rascunho, Publicado, Arquivado).';

COMMENT ON COLUMN "public_portal_content"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "public_portal_content"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "public_portal_content"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "public_portal_content"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "public_portal_content"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "public_portal_content_versions" IS 'Armazena as diferentes versões do conteúdo do portal público.';

COMMENT ON COLUMN "public_portal_content_versions"."public_portal_content_id" IS 'ID do conteúdo do portal ao qual esta versão pertence.';

COMMENT ON COLUMN "public_portal_content_versions"."version_number" IS 'Número da versão do conteúdo.';

COMMENT ON COLUMN "public_portal_content_versions"."content" IS 'Corpo do conteúdo desta versão (HTML, texto formatado).';

COMMENT ON COLUMN "public_portal_content_versions"."version_date" IS 'Data e hora em que esta versão foi criada.';

COMMENT ON COLUMN "public_portal_content_versions"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "public_portal_content_versions"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "public_portal_content_versions"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "public_portal_content_versions"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "public_portal_content_versions"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "system_settings" IS 'Armazena configurações gerais do sistema em pares chave-valor.';

COMMENT ON COLUMN "system_settings"."setting_key" IS 'Chave única para a configuração do sistema.';

COMMENT ON COLUMN "system_settings"."setting_value" IS 'Valor da configuração.';

COMMENT ON COLUMN "system_settings"."description" IS 'Descrição da configuração.';

COMMENT ON COLUMN "system_settings"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "system_settings"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "system_settings"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "system_settings"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "system_settings"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "roles" IS 'Define os diferentes papéis de usuário no sistema para gerenciamento de permissões. Um papel pode ser marcado como padrão para um tipo de pessoa, sendo atribuído automaticamente na criação.';

COMMENT ON COLUMN "roles"."name" IS 'Nome único do papel (ex: Administrador, Professor, Aluno).';

COMMENT ON COLUMN "roles"."description" IS 'Descrição detalhada do papel.';

COMMENT ON COLUMN "roles"."default_for_person_type" IS 'Indica se este papel é o padrão a ser atribuído automaticamente para um tipo de pessoa específico (Aluno, Professor, Funcionário).';

COMMENT ON COLUMN "roles"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "roles"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "roles"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "roles"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "roles"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "permissions" IS 'Define as permissões granulares disponíveis no sistema.';

COMMENT ON COLUMN "permissions"."name" IS 'Nome único da permissão (ex: view_students, edit_grades).';

COMMENT ON COLUMN "permissions"."description" IS 'Descrição detalhada da permissão.';

COMMENT ON COLUMN "permissions"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "permissions"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "permissions"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "permissions"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "permissions"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "role_permissions" IS 'Associa permissões a papéis de usuário.';

COMMENT ON COLUMN "role_permissions"."role_id" IS 'ID do papel.';

COMMENT ON COLUMN "role_permissions"."permission_id" IS 'ID da permissão.';

COMMENT ON COLUMN "role_permissions"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "role_permissions"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "role_permissions"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "role_permissions"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "role_permissions"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "user_roles" IS 'Associa pessoas a papéis de usuário, definindo suas permissões de acesso. Permite a atribuição de múltiplos papéis, incluindo o papel padrão definido pelo tipo de pessoa.';

COMMENT ON COLUMN "user_roles"."person_id" IS 'ID da pessoa.';

COMMENT ON COLUMN "user_roles"."role_id" IS 'ID do papel atribuído.';

COMMENT ON COLUMN "user_roles"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "user_roles"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "user_roles"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "user_roles"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "user_roles"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "incident_types" IS 'Define os diferentes tipos de incidentes que podem ocorrer na escola.';

COMMENT ON COLUMN "incident_types"."name" IS 'Nome do tipo de incidente (ex: Bullying, Agressão Física).';

COMMENT ON COLUMN "incident_types"."description" IS 'Descrição detalhada do tipo de incidente.';

COMMENT ON COLUMN "incident_types"."severity_level" IS 'Nível de gravidade padrão para este tipo de incidente.';

COMMENT ON COLUMN "incident_types"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "incident_types"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "incident_types"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "incident_types"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "incident_types"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "incidents" IS 'Registra os incidentes ocorridos nas escolas, incluindo tipo, local, quem reportou e status de resolução.';

COMMENT ON COLUMN "incidents"."incident_type_id" IS 'ID do tipo de incidente.';

COMMENT ON COLUMN "incidents"."school_id" IS 'ID da escola onde o incidente ocorreu.';

COMMENT ON COLUMN "incidents"."reported_by_id" IS 'ID da pessoa que reportou o incidente.';

COMMENT ON COLUMN "incidents"."incident_date" IS 'Data e hora em que o incidente ocorreu ou foi reportado.';

COMMENT ON COLUMN "incidents"."description" IS 'Descrição detalhada do incidente.';

COMMENT ON COLUMN "incidents"."resolution_status" IS 'Status atual da resolução do incidente.';

COMMENT ON COLUMN "incidents"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "incidents"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "incidents"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "incidents"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "incidents"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "student_incidents" IS 'Associa alunos a incidentes, especificando o papel de cada aluno no ocorrido.';

COMMENT ON COLUMN "student_incidents"."student_profile_id" IS 'ID do perfil do aluno envolvido no incidente.';

COMMENT ON COLUMN "student_incidents"."incident_id" IS 'ID do incidente.';

COMMENT ON COLUMN "student_incidents"."role_in_incident" IS 'Papel do aluno no incidente (Vítima, Agente, Testemunha).';

COMMENT ON COLUMN "student_incidents"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "student_incidents"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "student_incidents"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "student_incidents"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "student_incidents"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "disciplinary_actions" IS 'Registra as ações disciplinares tomadas contra alunos em resposta a incidentes.';

COMMENT ON COLUMN "disciplinary_actions"."student_incident_id" IS 'ID da associação aluno-incidente para a qual a ação disciplinar foi aplicada.';

COMMENT ON COLUMN "disciplinary_actions"."action_type" IS 'Tipo de ação disciplinar aplicada.';

COMMENT ON COLUMN "disciplinary_actions"."action_date" IS 'Data em que a ação disciplinar foi aplicada.';

COMMENT ON COLUMN "disciplinary_actions"."description" IS 'Descrição detalhada da ação disciplinar e seus motivos.';

COMMENT ON COLUMN "disciplinary_actions"."taken_by_id" IS 'ID da pessoa que aplicou a ação disciplinar.';

COMMENT ON COLUMN "disciplinary_actions"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "disciplinary_actions"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "disciplinary_actions"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "disciplinary_actions"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "disciplinary_actions"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "school_events" IS 'Gerencia o calendário escolar e eventos, podendo ser vinculados a uma escola específica ou ser de âmbito municipal.';

COMMENT ON COLUMN "school_events"."school_id" IS 'ID da escola à qual o evento está vinculado (opcional, para eventos municipais).';

COMMENT ON COLUMN "school_events"."title" IS 'Título do evento.';

COMMENT ON COLUMN "school_events"."description" IS 'Descrição detalhada do evento.';

COMMENT ON COLUMN "school_events"."event_type" IS 'Tipo do evento (Acadêmico, Esportivo, Cultural, Feriado, Reunião, Outro).';

COMMENT ON COLUMN "school_events"."start_date_time" IS 'Data e hora de início do evento.';

COMMENT ON COLUMN "school_events"."end_date_time" IS 'Data e hora de término do evento.';

COMMENT ON COLUMN "school_events"."location" IS 'Local onde o evento será realizado.';

COMMENT ON COLUMN "school_events"."audience" IS 'Público-alvo do evento (Alunos, Professores, Funcionários, Pais, Comunidade, Todos).';

COMMENT ON COLUMN "school_events"."status" IS 'Status atual do evento (Confirmado, Cancelado, Adiado).';

COMMENT ON COLUMN "school_events"."organizer_id" IS 'ID da pessoa responsável pela organização do evento.';

COMMENT ON COLUMN "school_events"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "school_events"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "school_events"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "school_events"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "school_events"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "event_attendees" IS 'Registra os participantes ou inscritos em eventos escolares.';

COMMENT ON COLUMN "event_attendees"."event_id" IS 'ID do evento.';

COMMENT ON COLUMN "event_attendees"."person_id" IS 'ID da pessoa que se registrou ou compareceu ao evento.';

COMMENT ON COLUMN "event_attendees"."registration_date" IS 'Data e hora do registro de presença ou inscrição.';

COMMENT ON COLUMN "event_attendees"."attendance_status" IS 'Status da presença (ex: Confirmado, Compareceu, Ausente).';

COMMENT ON COLUMN "event_attendees"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "event_attendees"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "event_attendees"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "event_attendees"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "event_attendees"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "professional_development_programs" IS 'Gerencia os programas de desenvolvimento profissional disponíveis para os professores.';

COMMENT ON COLUMN "professional_development_programs"."name" IS 'Nome do programa de desenvolvimento profissional.';

COMMENT ON COLUMN "professional_development_programs"."description" IS 'Descrição detalhada do programa.';

COMMENT ON COLUMN "professional_development_programs"."type" IS 'Tipo de desenvolvimento profissional (Curso, Workshop, Conferência, Certificação, Outro).';

COMMENT ON COLUMN "professional_development_programs"."start_date" IS 'Data de início do programa.';

COMMENT ON COLUMN "professional_development_programs"."end_date" IS 'Data de término do programa.';

COMMENT ON COLUMN "professional_development_programs"."organizer" IS 'Organizador ou instituição responsável pelo programa.';

COMMENT ON COLUMN "professional_development_programs"."cost" IS 'Custo do programa de desenvolvimento profissional.';

COMMENT ON COLUMN "professional_development_programs"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "professional_development_programs"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "professional_development_programs"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "professional_development_programs"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "professional_development_programs"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "teacher_certifications" IS 'Armazena as certificações profissionais obtidas pelos professores.';

COMMENT ON COLUMN "teacher_certifications"."teacher_id" IS 'ID do professor que possui a certificação.';

COMMENT ON COLUMN "teacher_certifications"."certification_name" IS 'Nome da certificação obtida.';

COMMENT ON COLUMN "teacher_certifications"."issue_date" IS 'Data de emissão da certificação.';

COMMENT ON COLUMN "teacher_certifications"."expiry_date" IS 'Data de validade da certificação (se aplicável).';

COMMENT ON COLUMN "teacher_certifications"."issuing_body" IS 'Órgão ou instituição que emitiu a certificação.';

COMMENT ON COLUMN "teacher_certifications"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "teacher_certifications"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "teacher_certifications"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "teacher_certifications"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "teacher_certifications"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "teacher_pd_enrollments" IS 'Registra a inscrição e o status dos professores em programas de desenvolvimento profissional.';

COMMENT ON COLUMN "teacher_pd_enrollments"."teacher_id" IS 'ID do professor inscrito no programa.';

COMMENT ON COLUMN "teacher_pd_enrollments"."program_id" IS 'ID do programa de desenvolvimento profissional.';

COMMENT ON COLUMN "teacher_pd_enrollments"."enrollment_date" IS 'Data de inscrição do professor no programa.';

COMMENT ON COLUMN "teacher_pd_enrollments"."completion_date" IS 'Data de conclusão do programa pelo professor.';

COMMENT ON COLUMN "teacher_pd_enrollments"."status" IS 'Status da participação do professor no programa.';

COMMENT ON COLUMN "teacher_pd_enrollments"."grade_or_feedback" IS 'Nota ou feedback sobre a participação do professor no programa.';

COMMENT ON COLUMN "teacher_pd_enrollments"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "teacher_pd_enrollments"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "teacher_pd_enrollments"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "teacher_pd_enrollments"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "teacher_pd_enrollments"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

COMMENT ON TABLE "attachments" IS 'Gerencia anexos (fotos, documentos) associados a diversas entidades do sistema através de uma chave estrangeira genérica.';

COMMENT ON COLUMN "attachments"."entity_type" IS 'Tipo da entidade à qual o anexo está relacionado (ex: student, staff, school).';

COMMENT ON COLUMN "attachments"."entity_id" IS 'ID da entidade à qual o anexo está relacionado.';

COMMENT ON COLUMN "attachments"."file_name" IS 'Nome original do arquivo.';

COMMENT ON COLUMN "attachments"."file_path_url" IS 'Caminho ou URL para o arquivo armazenado.';

COMMENT ON COLUMN "attachments"."file_type" IS 'Tipo MIME do arquivo (ex: image/jpeg, application/pdf).';

COMMENT ON COLUMN "attachments"."file_size_bytes" IS 'Tamanho do arquivo em bytes.';

COMMENT ON COLUMN "attachments"."description" IS 'Descrição opcional do anexo.';

COMMENT ON COLUMN "attachments"."uploaded_by_id" IS 'ID da pessoa que carregou o anexo.';

COMMENT ON COLUMN "attachments"."uploaded_at" IS 'Data e hora do upload do anexo.';

COMMENT ON COLUMN "attachments"."created_at" IS 'Data de criação do registro.';

COMMENT ON COLUMN "attachments"."updated_at" IS 'Data da última atualização do registro.';

COMMENT ON COLUMN "attachments"."created_by" IS 'ID da pessoa que criou o registro.';

COMMENT ON COLUMN "attachments"."updated_by" IS 'ID da pessoa que atualizou o registro pela última vez.';

COMMENT ON COLUMN "attachments"."deleted_at" IS 'Data e hora em que o registro foi logicamente excluído.';

ALTER TABLE "schools" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "schools" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "infrastructures" ADD FOREIGN KEY ("school_id") REFERENCES "schools" ("id");

ALTER TABLE "infrastructures" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "infrastructures" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "people" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "people" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "student_profiles" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "student_profiles" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "student_profiles" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "guardians" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "guardians" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "guardians" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "student_guardians" ADD FOREIGN KEY ("student_profile_id") REFERENCES "student_profiles" ("id");

ALTER TABLE "student_guardians" ADD FOREIGN KEY ("guardian_id") REFERENCES "guardians" ("id");

ALTER TABLE "student_guardians" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "student_guardians" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "student_enrollments" ADD FOREIGN KEY ("student_profile_id") REFERENCES "student_profiles" ("id");

ALTER TABLE "student_enrollments" ADD FOREIGN KEY ("academic_year_id") REFERENCES "academic_years" ("id");

ALTER TABLE "student_enrollments" ADD FOREIGN KEY ("school_id") REFERENCES "schools" ("id");

ALTER TABLE "student_enrollments" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "student_enrollments" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "student_status_history" ADD FOREIGN KEY ("student_enrollment_id") REFERENCES "student_enrollments" ("id");

ALTER TABLE "student_status_history" ADD FOREIGN KEY ("changed_by_id") REFERENCES "people" ("id");

ALTER TABLE "student_status_history" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "student_status_history" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "teachers" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "teachers" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "teachers" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "positions" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "positions" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "departments" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "departments" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "staff" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "staff" ADD FOREIGN KEY ("position_id") REFERENCES "positions" ("id");

ALTER TABLE "staff" ADD FOREIGN KEY ("department_id") REFERENCES "departments" ("id");

ALTER TABLE "staff" ADD FOREIGN KEY ("school_id") REFERENCES "schools" ("id");

ALTER TABLE "staff" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "staff" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "academic_years" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "academic_years" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "academic_periods" ADD FOREIGN KEY ("academic_year_id") REFERENCES "academic_years" ("id");

ALTER TABLE "academic_periods" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "academic_periods" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "courses" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "courses" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "subjects" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "subjects" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "course_subjects" ADD FOREIGN KEY ("course_id") REFERENCES "courses" ("id");

ALTER TABLE "course_subjects" ADD FOREIGN KEY ("subject_id") REFERENCES "subjects" ("id");

ALTER TABLE "course_subjects" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "course_subjects" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "classes" ADD FOREIGN KEY ("academic_period_id") REFERENCES "academic_periods" ("id");

ALTER TABLE "classes" ADD FOREIGN KEY ("school_id") REFERENCES "schools" ("id");

ALTER TABLE "classes" ADD FOREIGN KEY ("course_id") REFERENCES "courses" ("id");

ALTER TABLE "classes" ADD FOREIGN KEY ("homeroom_teacher_id") REFERENCES "teachers" ("id");

ALTER TABLE "classes" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "classes" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "class_enrollments" ADD FOREIGN KEY ("student_enrollment_id") REFERENCES "student_enrollments" ("id");

ALTER TABLE "class_enrollments" ADD FOREIGN KEY ("class_id") REFERENCES "classes" ("id");

ALTER TABLE "class_enrollments" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "class_enrollments" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "class_teacher_subjects" ADD FOREIGN KEY ("class_id") REFERENCES "classes" ("id");

ALTER TABLE "class_teacher_subjects" ADD FOREIGN KEY ("teacher_id") REFERENCES "teachers" ("id");

ALTER TABLE "class_teacher_subjects" ADD FOREIGN KEY ("subject_id") REFERENCES "subjects" ("id");

ALTER TABLE "class_teacher_subjects" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "class_teacher_subjects" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "lessons" ADD FOREIGN KEY ("class_teacher_subject_id") REFERENCES "class_teacher_subjects" ("id");

ALTER TABLE "lessons" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "lessons" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "evaluation_instances" ADD FOREIGN KEY ("class_teacher_subject_id") REFERENCES "class_teacher_subjects" ("id");

ALTER TABLE "evaluation_instances" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "evaluation_instances" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "grades" ADD FOREIGN KEY ("student_enrollment_id") REFERENCES "student_enrollments" ("id");

ALTER TABLE "grades" ADD FOREIGN KEY ("evaluation_instance_id") REFERENCES "evaluation_instances" ("id");

ALTER TABLE "grades" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "grades" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "attendances" ADD FOREIGN KEY ("student_enrollment_id") REFERENCES "student_enrollments" ("id");

ALTER TABLE "attendances" ADD FOREIGN KEY ("lesson_id") REFERENCES "lessons" ("id");

ALTER TABLE "attendances" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "attendances" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "school_documents" ADD FOREIGN KEY ("student_enrollment_id") REFERENCES "student_enrollments" ("id");

ALTER TABLE "school_documents" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "school_documents" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "school_documents_versions" ADD FOREIGN KEY ("school_document_id") REFERENCES "school_documents" ("id");

ALTER TABLE "school_documents_versions" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "school_documents_versions" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "communications" ADD FOREIGN KEY ("sender_id") REFERENCES "people" ("id");

ALTER TABLE "communications" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "communications" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "communication_recipients" ADD FOREIGN KEY ("communication_id") REFERENCES "communications" ("id");

ALTER TABLE "communication_recipients" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "communication_recipients" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "communication_recipients" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "secretariat_protocols" ADD FOREIGN KEY ("requester_id") REFERENCES "people" ("id");

ALTER TABLE "secretariat_protocols" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "secretariat_protocols" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "protocol_status_history" ADD FOREIGN KEY ("protocol_id") REFERENCES "secretariat_protocols" ("id");

ALTER TABLE "protocol_status_history" ADD FOREIGN KEY ("changed_by_id") REFERENCES "people" ("id");

ALTER TABLE "protocol_status_history" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "protocol_status_history" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "secretariat_services" ADD FOREIGN KEY ("protocol_id") REFERENCES "secretariat_protocols" ("id");

ALTER TABLE "secretariat_services" ADD FOREIGN KEY ("attendant_id") REFERENCES "staff" ("id");

ALTER TABLE "secretariat_services" ADD FOREIGN KEY ("requester_id") REFERENCES "people" ("id");

ALTER TABLE "secretariat_services" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "secretariat_services" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "public_portal_content" ADD FOREIGN KEY ("author_id") REFERENCES "staff" ("id");

ALTER TABLE "public_portal_content" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "public_portal_content" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "public_portal_content_versions" ADD FOREIGN KEY ("public_portal_content_id") REFERENCES "public_portal_content" ("id");

ALTER TABLE "public_portal_content_versions" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "public_portal_content_versions" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "system_settings" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "system_settings" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "roles" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "roles" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "permissions" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "permissions" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "role_permissions" ADD FOREIGN KEY ("role_id") REFERENCES "roles" ("id");

ALTER TABLE "role_permissions" ADD FOREIGN KEY ("permission_id") REFERENCES "permissions" ("id");

ALTER TABLE "role_permissions" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "role_permissions" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "user_roles" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "user_roles" ADD FOREIGN KEY ("role_id") REFERENCES "roles" ("id");

ALTER TABLE "user_roles" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "user_roles" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "incident_types" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "incident_types" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "incidents" ADD FOREIGN KEY ("incident_type_id") REFERENCES "incident_types" ("id");

ALTER TABLE "incidents" ADD FOREIGN KEY ("school_id") REFERENCES "schools" ("id");

ALTER TABLE "incidents" ADD FOREIGN KEY ("reported_by_id") REFERENCES "people" ("id");

ALTER TABLE "incidents" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "incidents" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "student_incidents" ADD FOREIGN KEY ("student_profile_id") REFERENCES "student_profiles" ("id");

ALTER TABLE "student_incidents" ADD FOREIGN KEY ("incident_id") REFERENCES "incidents" ("id");

ALTER TABLE "student_incidents" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "student_incidents" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "disciplinary_actions" ADD FOREIGN KEY ("student_incident_id") REFERENCES "student_incidents" ("id");

ALTER TABLE "disciplinary_actions" ADD FOREIGN KEY ("taken_by_id") REFERENCES "people" ("id");

ALTER TABLE "disciplinary_actions" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "disciplinary_actions" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "school_events" ADD FOREIGN KEY ("school_id") REFERENCES "schools" ("id");

ALTER TABLE "school_events" ADD FOREIGN KEY ("organizer_id") REFERENCES "people" ("id");

ALTER TABLE "school_events" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "school_events" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "event_attendees" ADD FOREIGN KEY ("event_id") REFERENCES "school_events" ("id");

ALTER TABLE "event_attendees" ADD FOREIGN KEY ("person_id") REFERENCES "people" ("id");

ALTER TABLE "event_attendees" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "event_attendees" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "professional_development_programs" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "professional_development_programs" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "teacher_certifications" ADD FOREIGN KEY ("teacher_id") REFERENCES "teachers" ("id");

ALTER TABLE "teacher_certifications" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "teacher_certifications" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "teacher_pd_enrollments" ADD FOREIGN KEY ("teacher_id") REFERENCES "teachers" ("id");

ALTER TABLE "teacher_pd_enrollments" ADD FOREIGN KEY ("program_id") REFERENCES "professional_development_programs" ("id");

ALTER TABLE "teacher_pd_enrollments" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "teacher_pd_enrollments" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");

ALTER TABLE "attachments" ADD FOREIGN KEY ("uploaded_by_id") REFERENCES "people" ("id");

ALTER TABLE "attachments" ADD FOREIGN KEY ("created_by") REFERENCES "people" ("id");

ALTER TABLE "attachments" ADD FOREIGN KEY ("updated_by") REFERENCES "people" ("id");
